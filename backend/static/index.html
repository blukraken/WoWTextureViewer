<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>WoW Texture Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="header">
    <div class="brand">WoW Texture Viewer <small>Python API + JS UI</small></div>
    <div class="search">
      <input id="search" type="search" placeholder="Search filenames…" />
      <span id="count" class="tag"></span>
    </div>
  </header>

  <section class="dropzone" id="dropzone">
    <p><b>Drop</b> .BLP / .TGA / images here or</p>
    <div class="controls">
      <input id="fileInput" type="file" multiple accept=".blp,.tga,.png,.jpg,.jpeg,.webp,.bmp" />
      <button class="btn" id="browseBtn">Browse files</button>
      <button class="btn subtle" id="refreshBtn">Refresh</button>
    </div>
    <p class="drop-hint">Files are converted to PNG server‑side. Search is instant on the client.</p>
  </section>

  <main id="gallery" class="gallery"></main>

  <dialog id="modal" class="modal">
    <header>
      <strong id="modalTitle"></strong>
      <button class="close" id="modalClose" aria-label="Close">×</button>
    </header>
    <div class="content">
      <div class="canvas-wrap">
        <img id="modalImg" alt="" />
      </div>
      <p class="muted"><span id="modalSize"></span></p>
      <a class="btn" id="modalDownload" download>Download PNG</a>
    </div>
  </dialog>

  <script>
    const API_BASE = (location.hostname === "localhost" || location.hostname === "127.0.0.1")
      ? "http://localhost:8000"
      : ""; // same origin when deployed together
  </script>
  <script src="./app.js" type="module"></script>
</body>
</html>
